# 旅游地图项目描述

## 1. 技术栈

| 技术/工具 | 用途 | 说明 |
|---------|------|------|
| Vue.js | 前端框架 | 用于构建响应式用户界面的渐进式JavaScript框架 |
| OpenLayers (ol) | 地图库 | 提供高性能、交互式地图功能的开源JavaScript库 |
| LocalStorage | 数据存储 | 用于客户端数据持久化存储，无需后端支持 |

## 2. 主要功能

### 2.1 地图管理
- 地图初始化与配置
- 图层管理（瓦片图层、矢量图层）
- 坐标系统转换
- POI标记显示与交互

### 2.2 旅游点(POI)管理
- 旅游点的创建、编辑、删除
- 旅游点定位与地图标记
- 旅游点数据的本地存储与加载

### 2.3 旅行计划管理
- 旅行计划的创建、更新、删除
- 旅行计划的选择与切换
- 旅行相关数据的关联管理

### 2.4 预算管理
- 消费记录的添加与查看
- 消费与旅游点的关联
- 预算数据的本地存储与统计

## 3. 核心功能

### 3.1 地图渲染与交互
- 使用OpenLayers初始化高性能地图实例
- 支持多种地图图层类型（瓦片、矢量）
- 实现自定义样式的POI标记（可配置颜色、大小）
- 提供坐标转换工具（经纬度与地图投影坐标互转）

### 3.2 数据管理系统
- 基于LocalStorage的客户端数据持久化
- 实现POI、旅行计划、预算数据的CRUD操作
- 数据之间的关联与级联操作（如删除旅行时自动清理相关数据）

### 3.3 用户界面与交互
- 响应式布局设计，适配不同设备
- 直观的旅行计划管理界面
- 地图与数据面板的联动交互
- 清晰的预算管理与消费记录界面

## 4. 目录结构

```
src/
├── components/              # Vue组件目录
│   ├── Map.vue             # 地图组件 - 处理地图渲染与交互
│   ├── TripManager.vue     # 旅行管理组件 - 旅行计划的增删改查
│   ├── BudgetCmp.vue       # 预算管理组件 - 消费记录管理
│   └── TripCard.vue        # 旅行卡片组件 - 旅行信息展示
├── utils/                  # 工具函数目录
│   ├── MapUtils.js         # 地图工具函数 - 地图相关操作工具
│   ├── Poi.js              # POI工具函数 - 旅游点数据操作
│   ├── Trip.js             # 旅行工具函数 - 旅行数据操作
│   └── Budget.js           # 预算工具函数 - 预算数据操作
├── App.vue                 # 主应用组件 - 全局状态与组件通信
└── main.js                 # 应用入口文件 - Vue应用初始化
```

## 5. 组件作用

### 5.1 App.vue
- 主应用组件，作为整个应用的根组件
- 管理全局状态（如当前选中的旅行、POI列表、预算数据）
- 处理组件间通信，协调各功能模块
- 实现数据的初始化加载与更新

### 5.2 Map.vue
- 地图功能的核心实现组件
- 使用OpenLayers初始化地图实例
- 管理地图图层和样式
- 处理POI标记的显示与交互事件
- 实现地图缩放、平移等基本操作

### 5.3 TripManager.vue
- 旅行计划的管理组件
- 提供旅行计划的创建表单
- 实现旅行列表的展示与操作（编辑、删除）
- 处理旅行选择逻辑

### 5.4 BudgetCmp.vue
- 预算与消费管理组件
- 提供消费记录的添加表单
- 展示消费记录列表
- 实现消费与旅游点的关联管理

### 5.5 TripCard.vue
- 旅行信息的展示组件
- 以卡片形式展示旅行计划的基本信息
- 提供旅行选择和删除的交互按钮

## 6. 核心工具函数

### 6.1 MapUtils.js
- `createStyle`: 创建自定义地图标记样式
- `createVectorLayer`: 创建矢量图层用于POI标记
- 坐标转换工具函数
- 地图视图操作相关函数

### 6.2 Poi.js
- `addPoi`: 添加新旅游点到本地存储
- `updPoi`: 更新旅游点信息
- `delPoi`: 删除旅游点
- `getLsPois`: 从本地存储获取所有旅游点

### 6.3 Trip.js
- `addTrip`: 添加新旅行计划
- `updTrip`: 更新旅行计划
- `delTrip`: 删除旅行计划
- `getAllTrips`: 获取所有旅行计划

### 6.4 Budget.js
- `getLsBudgetItems`: 从本地存储获取预算项目
- `saveLsBudgetItems`: 保存预算项目到本地存储
- `addBudgetItem`: 添加预算项目
- `updBudgetItem`: 更新预算项目
